(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{355:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return u(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RandomBackend=void 0;var o=n(356),l=n(239),i=a(n(239));n(574),n(575);var c=n(576).default,s=n(577);c.apps.length||c.initializeApp(s),i.initialize(c.firestore(),{validateModels:!0});var d=function(){function e(){this.currentUser=null}return e.prototype.login=function(){var e=new c.auth.GoogleAuthProvider;c.auth().signInWithPopup(e).then((function(e){console.log(e.user)})).catch((function(e){console.log(e)}))},e.prototype.logout=function(){this.currentUser=null,c.auth().signOut()},e.prototype.userStatusChange=function(e){var t=this;c.auth().onAuthStateChanged((function(n){n?l.getRepository(o.AuthUser).findById(n.uid).then((function(r){t.currentUser=r,r||(t.currentUser=o.AuthUser.fromFirebaseUser(n),l.getRepository(o.AuthUser).create(t.currentUser)),e(t.currentUser)})):(console.log("user loggout!"),e(null))}))},e.prototype.getCurrentUserOrNull=function(){return this.currentUser},e.prototype.getCurrentUser=function(){return this.currentUser},e}();t.RandomBackend=new d},356:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var u,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(u=e[l])&&(o=(a<3?u(o):a>3?u(t,n,o):u(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthUser=t.WatchSubscription=void 0;var u=n(239),a=function(){};t.WatchSubscription=a;var o=function(){function e(){this.displayName=null}var t;return t=e,e.fromFirebaseUser=function(e){var n=new t;return n.displayName=e.displayName,n.id=e.uid,n},e.prototype.uid=function(){return this.id},e.prototype.subscriptionAdd=function(e){this.subscriptions.create(e)},r([u.SubCollection(a)],e.prototype,"subscriptions",void 0),e=t=r([u.Collection()],e)}();t.AuthUser=o},523:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(n(0)),a=r(n(16));n(539);var o=r(n(540)),l=r(n(921));a.default.render(u.default.createElement(u.default.StrictMode,null,u.default.createElement(o.default,null)),document.getElementById("root")),l.default()},539:function(e,t,n){},540:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(0)),o=n(452);n(545);var l=n(452),i=n(546),c=n(355),s=n(578),d=function(){return a.default.createElement("h1",null," Oops! That page couldn't be found. ")},f=function(){var e=c.RandomBackend.getCurrentUser();return a.default.createElement("h1",null," My Subscription for ",e.displayName,", ",e.id," ")};function p(){return a.default.createElement("div",null,a.default.createElement(b,null),a.default.createElement("p",{onClick:function(e){c.RandomBackend.logout()}},"Logout"))}function m(){return a.default.createElement("h1",null," Un-AuthenticatedApp xxx",a.default.createElement("p",{onClick:function(e){console.log("clicked"),c.RandomBackend.login()}},"Sign in here"))}function h(e){var t=a.default.useState(void 0),n=t[0],r=t[1];return a.default.useEffect((function(){c.RandomBackend.userStatusChange((function(e){r(e)}))}),[]),void 0===n?a.default.createElement("h2",null," Loading"):n?a.default.createElement(i.AuthUserContext.Provider,{value:n},a.default.createElement(p,null)):a.default.createElement(m,null)}var b=o.withRouter((function(e){return e.location.search.startsWith("?/")?a.default.createElement(o.Redirect,{to:e.location.search.slice(1)}):a.default.createElement(o.Switch,null,a.default.createElement(o.Route,{exact:!0,path:"/",component:s.AuthenicatedHome}),a.default.createElement(o.Route,{exact:!0,path:"/sub",component:f}),a.default.createElement(o.Route,{exact:!0,path:"*",component:d}))}));t.default=function(e){return a.default.createElement(l.BrowserRouter,null,a.default.createElement("header",null,a.default.createElement("div",{className:"App"},a.default.createElement(h,r({},e)))))}},545:function(e,t,n){},546:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthUserContext=void 0;var u=r(n(0));t.AuthUserContext=u.default.createContext(void 0)},577:function(e){e.exports=JSON.parse('{"projectId":"myrandomwatch-b4b41","appId":"1:458223764382:web:ad550ac9d5d240982d0c8f","databaseURL":"https://myrandomwatch-b4b41-default-rtdb.firebaseio.com","storageBucket":"myrandomwatch-b4b41.appspot.com","locationId":"us-central","apiKey":"AIzaSyCfD31xo4THGYQ5_Y0-VPVT71T3sB2YxL0","authDomain":"myrandomwatch-b4b41.firebaseapp.com","messagingSenderId":"458223764382","measurementId":"G-F2BBYE9XWJ"}')},578:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return u(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenicatedHome=void 0;var l=o(n(0)),i=n(355),c=n(356),s=o(n(579)),d=n(280),f=n(821),p=a(n(924));function m(e){var t=i.RandomBackend.getCurrentUser(),n=p.object().shape({name:p.string().required(),url:p.string().url().required()}),r=d.useForm({resolver:f.yupResolver(n)}),u=r.register,a=r.handleSubmit,o=r.errors,s=r.reset,m=a((function(n){var r=n.name,u=n.url,a=e.sub||new c.WatchSubscription;a.name=r,a.url=u,e.sub?t.subscriptions.update(a).then((function(){console.log("done updating subscriptions"),e.callback&&e.callback()})):t.subscriptions.create(a).then((function(){console.log("done creating subscriptions"),e.callback&&e.callback(),s()}))})),h=e.sub;return l.default.createElement("div",null,h?l.default.createElement("label",null,"Update Subscription"):l.default.createElement("label",null,"New Subscription"),l.default.createElement("form",{onSubmit:m},l.default.createElement("label",null,"Name"),l.default.createElement("input",{name:"name",ref:u,defaultValue:h&&h.name}),o.name&&"Name is required",l.default.createElement("label",null,"URL"),l.default.createElement("input",{name:"url",ref:u,defaultValue:h&&h.url}),o.url&&"URL must be valid",l.default.createElement("input",{type:"submit"})))}var h=function(e){var t={onRowsDelete:function(t){var n=i.RandomBackend.getCurrentUser();t.data.map((function(t){var r=e.subs[t.dataIndex].id;n.subscriptions.delete(r).then((function(){console.log("deleted:"+r)}))}))},onRowClick:function(t,n){e.subClicked&&(console.log("row clicked"),e.subClicked(e.subs[n.dataIndex]))}};return l.default.createElement("div",{style:{maxWidth:"100%"}},l.default.createElement(s.default,{columns:[{label:"Name",name:"name"},{label:"URL",name:"url"}],data:e.subs,title:"Watch Subscriptions",options:t}))};t.AuthenicatedHome=function(){var e=i.RandomBackend.getCurrentUser(),t=l.default.useState(void 0),n=t[0],r=t[1],u=l.default.useState(void 0),a=u[0],o=u[1],c=l.default.useState(!1),s=c[0],d=c[1];return l.default.useEffect((function(){e.subscriptions.find().then((function(e){o(e)}))}),[s]),l.default.createElement("div",null,l.default.createElement("h1",null,"AuthenticatedHome - ",e.displayName,", ",e.id),l.default.createElement(m,{sub:n,callback:function(){console.log("hello"),r(void 0),d(!s)}}),l.default.createElement(h,{subs:a,subClicked:function(e){console.log("upldated selected sub"),r(e)}}))}},921:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return u(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){e&&e instanceof Function&&Promise.resolve().then((function(){return a(n(922))})).then((function(t){var n=t.getCLS,r=t.getFID,u=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),u(e),a(e),o(e)}))}}},[[523,1,2]]]);
//# sourceMappingURL=main.8c6a1a00.chunk.js.map